var V=Object.defineProperty;var B=e=>{throw TypeError(e)};var W=(e,s,t)=>s in e?V(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t;var k=(e,s,t)=>W(e,typeof s!="symbol"?s+"":s,t),U=(e,s,t)=>s.has(e)||B("Cannot "+t);var r=(e,s,t)=>(U(e,s,"read from private field"),t?t.call(e):s.get(e)),v=(e,s,t)=>s.has(e)?B("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(e):s.set(e,t),Y=(e,s,t,a)=>(U(e,s,"write to private field"),a?a.call(e,t):s.set(e,t),t);import{G as F,H as X,I as m,J as j,C as x,K as C,v as D,B as ee,L as se,M as te,N as ae,w as re,O as ie,P as ne,Q as fe,R as ue,F as ce,S as $,U as de,V as he,b as H,W as le,X as Z,n as q,Y as _e,Z as z,g as T,_ as oe,$ as ve,a0 as be,a1 as ge,a2 as Se,A as pe,a3 as Pe,a4 as Ae,q as Ee,a5 as Ie,a6 as Re,a7 as Te,a8 as ye,f as Oe,a9 as me,aa as De,ab as Me}from"./DnLhgM-Q.js";import{s as Ne,g as we}from"./CKX27AQ1.js";var l,_,h,b,A,E,y;class Le{constructor(s,t=!0){k(this,"anchor");v(this,l,new Map);v(this,_,new Map);v(this,h,new Map);v(this,b,new Set);v(this,A,!0);v(this,E,()=>{var s=F;if(r(this,l).has(s)){var t=r(this,l).get(s),a=r(this,_).get(t);if(a)X(a),r(this,b).delete(t);else{var n=r(this,h).get(t);n&&(r(this,_).set(t,n.effect),r(this,h).delete(t),n.fragment.lastChild.remove(),this.anchor.before(n.fragment),a=n.effect)}for(const[i,u]of r(this,l)){if(r(this,l).delete(i),i===s)break;const f=r(this,h).get(u);f&&(m(f.effect),r(this,h).delete(u))}for(const[i,u]of r(this,_)){if(i===t||r(this,b).has(i))continue;const f=()=>{if(Array.from(r(this,l).values()).includes(i)){var o=document.createDocumentFragment();se(u,o),o.append(x()),r(this,h).set(i,{effect:u,fragment:o})}else m(u);r(this,b).delete(i),r(this,_).delete(i)};r(this,A)||!a?(r(this,b).add(i),j(u,f,!1)):f()}}});v(this,y,s=>{r(this,l).delete(s);const t=Array.from(r(this,l).values());for(const[a,n]of r(this,h))t.includes(a)||(m(n.effect),r(this,h).delete(a))});this.anchor=s,Y(this,A,t)}ensure(s,t){var a=F,n=te();if(t&&!r(this,_).has(s)&&!r(this,h).has(s))if(n){var i=document.createDocumentFragment(),u=x();i.append(u),r(this,h).set(s,{effect:C(()=>t(u)),fragment:i})}else r(this,_).set(s,C(()=>t(this.anchor)));if(r(this,l).set(a,s),n){for(const[f,c]of r(this,_))f===s?a.skipped_effects.delete(c):a.skipped_effects.add(c);for(const[f,c]of r(this,h))f===s?a.skipped_effects.delete(c.effect):a.skipped_effects.add(c.effect);a.oncommit(r(this,E)),a.ondiscard(r(this,y))}else D&&(this.anchor=ee),r(this,E).call(this)}}l=new WeakMap,_=new WeakMap,h=new WeakMap,b=new WeakMap,A=new WeakMap,E=new WeakMap,y=new WeakMap;function Fe(e,s,t=!1){D&&re();var a=new Le(e),n=t?ie:0;function i(u,f){if(D){const o=ne(e)===fe;if(u===o){var c=ue();ce(c),a.anchor=c,$(!1),a.ensure(u,f),$(!0);return}}a.ensure(u,f)}ae(()=>{var u=!1;s((f,c=!0)=>{u=!0,i(c,f)}),u||i(!1,null)},n)}function G(e,s){return e===s||(e==null?void 0:e[Z])===s}function xe(e={},s,t,a){return de(()=>{var n,i;return he(()=>{n=i,i=[],H(()=>{e!==t(...i)&&(s(e,...i),n&&G(t(...n),e)&&s(null,...n))})}),()=>{le(()=>{i&&G(t(...i),e)&&s(null,...i)})}}),e}let R=!1,M=Symbol();function Ce(e,s,t){const a=t[s]??(t[s]={store:null,source:_e(void 0),unsubscribe:q});if(a.store!==e&&!(M in t))if(a.unsubscribe(),a.store=e??null,e==null)a.source.v=void 0,a.unsubscribe=q;else{var n=!0;a.unsubscribe=Ne(e,i=>{n?a.source.v=i:z(a.source,i)}),n=!1}return e&&M in t?we(e):T(a.source)}function $e(){const e={};function s(){oe(()=>{for(var t in e)e[t].unsubscribe();ve(e,M,{enumerable:!1,value:!0})})}return[e,s]}function Be(e){var s=R;try{return R=!1,[e(),R]}finally{R=s}}function qe(e,s,t,a){var w;var n=!Ee||(t&Ie)!==0,i=(t&Re)!==0,u=(t&Me)!==0,f=a,c=!0,o=()=>(c&&(c=!1,f=u?H(a):a),f),S;if(i){var J=Z in e||ye in e;S=((w=be(e,s))==null?void 0:w.set)??(J&&s in e?d=>e[s]=d:void 0)}var p,N=!1;i?[p,N]=Be(()=>e[s]):p=e[s],p===void 0&&a!==void 0&&(p=o(),S&&(n&&me(),S(p)));var g;if(n?g=()=>{var d=e[s];return d===void 0?o():(c=!0,d)}:g=()=>{var d=e[s];return d!==void 0&&(f=void 0),d===void 0?f:d},n&&!(t&ge))return g;if(S){var K=e.$$legacy;return function(d,I){return arguments.length>0?((!n||!I||K||N)&&S(I?g():d),d):g()}}var O=!1,P=(t&De?Oe:Ae)(()=>(O=!1,g()));i&&T(P);var Q=pe;return function(d,I){if(arguments.length>0){const L=I?T(P):n&&i?Se(d):d;return z(P,L),O=!0,f!==void 0&&(f=L),d}return Te&&O||Q.f&Pe?P.v:T(P)}}export{Le as B,$e as a,xe as b,Fe as i,qe as p,Ce as s};
